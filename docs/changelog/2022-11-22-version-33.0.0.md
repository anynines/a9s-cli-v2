---
tags:
  - a9s
  - changelog
  - anynines-deployment
  - release
keywords:
  - a9s
  - changelog
  - anynines-deployment
  - release

slug: changelog-33.0.0
title: 33.0.0
date: 2022-11-22
---

## 

### Fixed
- **breaking change** a9s Backup Monit: The metric `last_backup_status` was
  adapted from a string value into a numeric value. This change was required
  because graphite metric values are numeric values, thus the graphite endpoints
  could not receive this metric as they expect numeric values.
  For more information see
  a9s Backup Monit Metrics.
- all services: a9s Logstash: Update the `logstash-output-graphite` plugin from
  version `3.1.5` to version `3.1.6`. This was necessary as the plugin was not
  handling `IOException` exceptions safely, which could in turn crash Logstash
  under certain situations.
- all services: a9s BOSH Deployer: Fix the `Recreate` button on the a9s Service
  Dashboard. This was caused by a missing `--fix` flag within the validation
  conditions of the `recreate` subcommand.
- a9s Backup Manager: Extend the error management inside the Backup Manager to
  catch the 'host unreachable' error when communicating with the Service Broker.
  This was necessary since the previous error management did not allow the
  search for further brokers to continue if any given broker listed was deemed
  unreachable (even if temporarily); thus causing an early end and potentially
  causing issues with the related backup.
- a9s Search: Disable all non-mandatory OpenSearch plugins from a9s Search. This
  was always the intended functionality.
- a9s Search: Add missing deployment variable, `/search_service_broker_password`,
  to the a9s Search manifest.
- docs: all services: Fix the documentation sidebar's ordering by adding the
  `sidebar=1` property to the metadata of the `intro.md` file.
  For more information see Introduction.
- docs: Application Developer: Remove duplicate section on the page
  Using a9s LogMe.
- docs: Platform Operator: Fix the title of the "a9s-pg Upgrade from 9.4" page.
  For more information see
  a9s-pg Upgrade from 9.4.
- docs: Platform Operator: Fix the title of the
  "a9s Redis Resources Considerations" page. For more information see
  a9s Redis Resources Considerations.
- docs: Platform Operator: Fix the title of the
  "Service Instance Resource Usage" page. For more information see
  Service Instance Resource Usage.
- docs: Platform Operator: Fix the title of the
  "a9s Data Services Configuration" page. For more information see
  a9s Data Services Configuration.
- docs: Platform Operator: Corrected the Non-GA version of a9s MariaDB. It was
  mistankenly set to v33.0.0 although it was already released as RC in v32.0.0.
  For more information see
  Release Lifecycle Information.
- *INTERNAL RELEASE* a9s PostgreSQL: Improve a9s postgresql-info-webservice
  component logs.

### Added

- **breaking change** a9s Redis: We now consider Redis 6 as `stable`.
  The following properties must be set:
  * redis_service.services.a9s-redis6.name
  * redis_service.services.a9s-redis6.guid
  * redis_service.services.a9s-redis6.description
  * redis_service.services.a9s-redis6.label
  * redis_service.services.a9s-redis6.version
  * redis_service.services.a9s-redis6.bindable
  * redis_service.services.a9s-redis6.requires
  * redis_service.services.a9s-redis6.tags
  * redis_service.services.a9s-redis6.documentation_url
  * redis_service.services.a9s-redis6.metadata
  * redis_service.services.a9s-redis6.dashboard_client.id
  * redis_service.services.a9s-redis6.plans
- **breaking change** a9s LogMe: Make the Cloud Foundry NATS credentials used by
  the Route Register configurable via template uploader variables. Moreover,
  the Cloud Foundry NATS credentials property have changed from `/cf_nats_user`
  and `/cf_nats_password` to `/cf_nats_credentials` of CredHub type User.
  You can check how to migrate the NATS credentials to the new variable in
  Upgrading to v33.
  The new properties are documented in
  Template Uploader Errand Properties.
- **breaking change** a9s Harbor: Make the Cloud Foundry NATS credentials used
  by the Route Register configurable via template uploader variables. Moreover,
  the Cloud Foundry NATS credentials property have changed from `/cf_nats_user`
  and `/cf_nats_password` to `/cf_nats_credentials` of CredHub type User.
  You can check how to migrate the NATS credentials to the new variable in
  Upgrading to v33.
  The new properties are documented in
  Template Uploader Errand Properties.
- **breaking change** a9s Prometheus: Make the Cloud Foundry NATS credentials
  used by the Route Register configurable via template uploader variables.
  Moreover, the Cloud Foundry NATS credentials property have changed from
  `/cf_nats_user` and `/cf_nats_password` to `/cf_nats_credentials` of CredHub
  type User. You can check how to migrate the NATS credentials to the new
  variable in
  Upgrading to v33.
  The new properties are documented in
  Template Uploader Errand Properties.
- **breaking change** a9s Messaging: Make the Cloud Foundry NATS credentials
  used by the Route Register configurable via
  Ops File. Moreover, the
  Cloud Foundry NATS credentials property have changed from `/cf_nats_user`
  and `/cf_nats_password` to `/cf_nats_credentials` of CredHub type User.
  You can check how to migrate the NATS credentials to the new variable in
  Upgrading to v33.
  The new properties are documented in
  Template Uploader Errand Properties.
- **breaking change** a9s Search: Release a9s Search 2 as a Release Candidate,
  see the Upgrade Guide for a9s Search 2
  and Release Lifecycle Information.
- all services: Add `consul` job to the `smoke-tests` instance group inside the
  deployment manifests. This ensures that all BOSH VMs are able to resolve
  hostnames via the a9s Consul, and do not need to rely on default DNS servers
  inside the `cloud_config`.
- a9s LogMe2: Release the first Beta Release of a9s LogMe2. a9s LogMe2 enables
  on demand provisioning of a pre-configured OpenSearch and Fluentd Stack. This
  service is a successor to a9s LogMe.
- a9s PostgreSQL: Add default configuration for continuous archiving. Now it
  is possible to specify default values globally or per plan for this property.
  It is also possible to specify if it is modifiable or not.
  For more information see
  Continuous Archiving.
- a9s Billing: Add `consul` job to the `sameness` instance group to ensure that
  all BOSH VMs are able to resolve hostnames via the a9s Consul. This ensures
  that all BOSH VMs are able to resolve hostnames via the a9s Consul, and do not
  need to rely on default DNS servers inside the `cloud_config`.
- a9s Search: Add the `consul` domains of a9s Elasticsearch to the whitelist of
  the `reindex` operation of OpenSearch. This is necessary in order to allow the
  migration from a9s Elasticsearch 7 to a9s Search 2 instances.
  For more infomation see
  Migrate a9s Elasticsearch 7 To a9s Search 2
- a9s Smoke Tests: Extend the functionality of the smoke tests to incorporate
  support for a9s Search 2.
- docs: Platform Operator: Add column `DS State` to the
  "Release Lifecycle Information" table to better visualize the current state of
  the a9s Data Service versions. For more information see
  a9s Data Services Release Lifecycle.
- docs: Platform Operator: Add a disclaimer specifying that a9s MariaDB does not
  support plan updates from `non-ssl` plans to `ssl` plans.
  For more information see
  a9s Data Services Installation and
  a9s MariaDB Resources Considerations.
- docs: Platform Operator: Add the anynines Data Services Base64 encoded icons
  to the "a9s Service Catalog" page.
  For more information see Service Catalog.
- docs: Platform Operator: Update installation guide to explicitly say that the
  backups of a9s Elasticsearch and a9s LogMe are not encrypted.
- docs: Application Developer: Add "Migrate a9s Elasticsearch 7 To a9s Search 2"
  page to the a9s Search documentation.
  For more information see
  Migrate a9s Elasticsearch 7 To a9s Search 2.

### Updated
- **breaking change** a9s Search: Enable the section in charge of testing the
  service instance's backup within the smoke tests by default. The property
  `service-smoke-tests.service.do_check_backup` has been set to `true`.
- all services: Update routing BOSH release to latest version `0.246.0`.
- all services: a9s Dashboard: Upgrade Node version to v16.18.0
- all services: a9s Dashboard: Several CVE fixes:
  * Update eventsource to 1.1.2
    * CVE-2022-1650
  * Update merge-deep to 3.0.3
    * CVE-2021-26707
  * Update minimist to 1.1.1
    * CVE-2021-44906
  * Update url-parse to 1.5.10
    * CVE-2022-0686
- a9s Harbor: Harbor 1.10.14
- a9s Messaging:
  * a9s Messaging 3.10
    * RabbitMQ 3.10.9
    * Erlang 24.3.4.6
  * a9s Messaging 3.8
    * Erlang 23.3.4.18
- a9s Prometheus: `promgraf2` BOSH release now includes:
  * Grafana 8.5.13
  * statsd_exporter 0.22.8
- a9s Prometheus: `prometheus2` BOSH release now includes:
  * Prometheus 2.40.0
  * statsd_exporter 0.22.8
- a9s Prometheus: `promgraf2` raises open file limit to 65536 via `ulimit` in
  the ctl script.
- a9s Prometheus: `prometheus2` raises open file limit to 65536 via `ulimit` in
  the ctl script.
- a9s MariaDB: MariaDB 10.6.11 and Mariadb 10.4.27
- a9s Search: OpenSearch 1.3.6
- a9s Elasticsearch: `elasticsearch7` BOSH release now includes:
  * OpenJDK 11.0.16_9
- a9s Elasticsearch: `elasticsearch6` BOSH release now includes:
  * OpenJDK 11.0.16_9
- a9s Elasticsearch: `elasticsearch5` BOSH release now includes:
  * OpenJDK 8u345-b01
- a9s Elasticsearch: `elasticsearch2` BOSH release now includes:
  * OpenJDK 8u345-b01
- a9s LogMe: `elasticsearch5` BOSH release now includes:
  * OpenJDK 8u345-b01
- a9s Billing: Update omniauth-keycloak gem to version 2.1.0. Fixes:
    * CVE-2020-36599
- addons/mongodbsspl: MongoDB 5.0.13
- docs: Platform Operator: Renamed the column `a9s Beta Release` to `a9s Non-GA`
  in the Release Lifecycle Information table to better reflect the intent of the
  release; as the service is either meant to be in the beta phase, or it can be
  the next release candidate. For more information see
  Release Lifecycle Information.
- docs: Platform Operator: Renamed the column `a9s Stable Release` to `a9s GA`
  in the Release Lifecycle Information table to better reflect the current
  nomenclature. For more information see
  Release Lifecycle Information.

### Removed
- **breaking change** a9s Search: Deprecate the Beta release of a9s Search 1.
  This deprecation is done in favor of a9s Search 2, but without any migration
  path because a9s Search 1 is a Beta product. The removal of this Beta service
  has been initiated and will be finalized in v36.0.0. Please be aware that if
  your instances still exist by v36.0.0 it will break your deployment.
- *INTERNAL RELEASE* a9s MariaDB: Remove the `consul-master-registrator` job
  from the templates of a9s MariaDB cluster plans. Since a9s MariaDB cluster
  instances are configured with a master-master setup, and accessed via a Consul
  service DNS entry that points to all nodes in the cluster. The primary alias
  provided by this job is not used nor is available to the end user in any way.
- *INTERNAL RELEASE* a9s MySQL: Remove the `consul-master-registrator` job
  from the templates of a9s MySQL cluster plans. Since a9s MySQL cluster
  instances are configured with a master-master setup, and accessed via a Consul
  service DNS entry that points to all nodes in the cluster. The primary alias
  provided by this job is not used nor is available to the end user in any way.
- *INTERNAL RELEASE* all services: a9s Logstash: Remove unused plugin
  `logstash-output-kafka` in version `7.0.10` from the offline package to avoid
  vulnerability scanner hints.

