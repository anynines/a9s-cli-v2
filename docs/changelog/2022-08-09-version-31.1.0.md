---
tags:
  - a9s
  - changelog
  - anynines-deployment
  - release
keywords:
  - a9s
  - changelog
  - anynines-deployment
  - release

slug: changelog-31.1.0
title: 31.1.0
date: 2022-08-09
---

## 

### Fixed
- a9s Harbor: Fix stop procedure for the `consul-master-registrator` component
  when stopping the a9s Harbor service instance.
- a9s Kubernetes: Fix stop procedure for the `consul-master-registrator`
  component when stopping the a9s Kubernetes service instance.
- a9s MySQL: Fix stop procedure for the `consul-master-registrator` component
  when stopping the a9s MariaDB service instance.
- a9s PostgreSQL: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- a9s Redis: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- a9s Search: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- a9s MongoDB: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- a9s Elasticsearch: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- a9s Messaging: SPI: Allow certificates rotation when certificates are provided via custom parameters.
  The provided certificates won't be ignored anymore, instead they will be applied on the service instance.
- all services: a9s BOSH Deployer: Make BOSH director `cloud-config` request
  fault tolerant.
- all services: a9s Backup Agent: Fix issue with the PITR plugin that would not wait
  for PostgreSQL to fully stop before going ahead restoring the base backup, this
  caused PostgreSQL to corrupt the base backup and fail to find the required WAL files,
  causing the operation to get stuck.
- all services: a9s Service Broker: Ensure the metadata will have all the parameters. Fixes
  an issue with the a9s Service Dashboard and a9s PostgreSQL service
  instances that lose the `Continuous Archiving` view after updating custom
  parameters.
- docs: Platform Operator: Fix broken table in the a9s Platform Required Ports
  documentation. See a9s Platform Required Ports.
- docs: Application Developer: Fix example for customer-provided Certificates
  for a Service Instance.
  See here.
- docs: Application Developer: Extend documentation explaining how to fork an
  a9s Messaging service instance with the intention to restore.
- docs: Platform Operator: Fix curl commands to use JSON formatting on the page
  anynines Data Services Administrative Tasks.
  Improve the wording regarding some required params for a restore call.
- docs: Platform Operator: Fix curl commands to use JSON formatting on the page
  a9s-pg Backup.
- *INTERNAL RELEASE* a9s MySQL: SPI: Improve the certificate generation inside the used library.

### Added
- a9s Backup Manager: Add support for independent certificates for each configured a9s Service Broker.
  Add ops files to configure the `ca` and `skip_ssl_validation` for each service.
  See `ops/tls_configurations/backup-service/add_broker_to_backup_service`
- a9s Backup Manager: Make the a9s Backup Agent job `max_attempts` property
  configurable.
- a9s Dashboard: Add configurable confirmation panel when disabling automatic
  updates. You can find more information about this in
  Configure Disable Automatic Update Modal.
- docs: Application Developer: Extend the a9s SSL/TLS Service Plans documentation to explain
  how to do certificate rotation for customer-provided certificates. For more information see:
  Certificate Rotation.
- docs: Platform Operator: Add information about the a9s Backup Agent job
  `max_attempts` property and how to configure it. For more information see
  a9s Backup Manager.
- docs: Platform Operator: Extend the TLS configuration documentation to include
  a step-by-step guide on how to rotate `wildcard certificates` and their `CA`.
  For more information see Common SSL/TLS configuration
- docs: Application Developer: Add missing contraints for a9s MySQL and a9s Search when using SSL plans.
  See here for further information.
- docs: Platform Operator: Add missing documentation on how to use `force_certificate_rotation` for a9s Redis.
  See here for further information.
- docs: Platform Operator: Add missing contraints for a9s Search when configuring TLS.
  See here for further information.
  For more information see
  Common SSL/TLS configuration.
- *INTERNAL RELEASE* a9s-pg: Add TLS for the `postgresql-backup-endpoint`.
- *INTERNAL RELEASE* a9s Backup Manager: Add TLS support for the a9s Backup
  Manager. Create an
  ops file
  to configure a9s Backup Manager to support TLS connections.
- *INTERNAL RELEASE* a9s Backup Monit: Create an
  ops file
  to let the a9s Backup Monit communicate with the a9s Backup Manager via TLS.
- *INTERNAL RELEASE* all services: a9s DS API Gateway: Create an
  ops file
  to let the a9s DS API Gateway communicate with the a9s Backup Manager via TLS.
- *INTERNAL RELEASE* all services: a9s Backup Monit: Update Storage Handler gem
  to version 1.2.5.

### Updated
- a9s Backup Monit: Ruby 3.0.4. The Ruby bump addresses internal Ruby issues
  when using the `resolv` library, which would trigger an infinite loop when
  creating a random number during host resolution.
- a9s Messaging: RabbitMQ 3.10.6 and RabbitMQ 3.8.35
- stemcell: We've tested our release with Ubuntu Bionic stemcell 1.88.
- a9s PostgreSQL: a9s PostgreSQL 13: Update the repmgr user to a role with less
  privileges, now it is a normal user that it is able to create replication
  connections. This change is made for a9s PostgreSQL 13 only as there are
  operational repmgr impediments for the older versions. We recommend migrating
  your data from the previous version to the latest version of a9s PostgreSQL 13.
- a9s Search: OpenSearch 1.3.4
- all services: a9s Backup Agent: Update the a9s PostgreSQL plugin for logical
  backups to drop the repmgr database before registering again to ensure the repmgr
  extension is recreated with the correct owner.
- all services: SPIs: Ruby 3.0.4 and rack 2.2.4. The Ruby bump addresses
  internal Ruby issues when using the `resolv` library, which would trigger an
  infinite loop when creating a random number during host resolution.
- all services: Update routing BOSH release to latest version `0.236.0`.
- all services: Update routing BOSH release to latest version `0.237.0`.
- docs: all services: Change the documentation tooling from `Zola` to `Docusaurus`. This changes
  the user interface of our customer facing documentation at https://docs.anynines.com
  and it will apply to all `anynines-deployment` versions starting from `v31.0.0`.
  For documentation older than `v31.0.0` please visit https://legacy-docs.anynines.com
- docs: all services: Update documentation's markdown files' metadata from `Zola` standards to
  `Docusaurus` standards. This change affects every markdown in our `docs` folder.
- addons/mongodbsspl: MongoDB 5.0.10
- a9s Backup Manager: Create an ops file
  to use the a9s Backup Manager with OpenStack.
- a9s Backup Manager: Remove aliyun_oss_location property from ops file
  It is not used internally and so it can be removed.
- a9s Backup Manager: Remove the opensearch-backup properties for the backup-on-alicloud ops file
  and the backup-on-generic-s3 ops file.
  These properties are not used internally by these backup stores and so they can be removed.

### Removed
- **breaking change** stemcell: We do not test anymore against Ubuntu Bionic
  stemcell 1.51 and 1.54.
- a9s PostgreSQL: Remove PostgreSQL 13 from
  enable-production-ready-services-only.yml
  because it's production ready.


